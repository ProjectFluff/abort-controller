/**
 * @author Toru Nagashima <https://github.com/mysticatea>
 * See LICENSE file in root directory for full license.
 */(function(a,b){"object"==typeof exports&&"undefined"!=typeof module?b(exports):"function"==typeof define&&define.amd?define(["exports"],b):(a=a||self,b(a.AbortControllerShim={}))})(this,function(a){"use strict";function b(a){"@babel/helpers - typeof";return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},b(a)}function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function d(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(a,n(c.key),c)}function e(a,b,c){return b&&d(a.prototype,b),c&&d(a,c),Object.defineProperty(a,"prototype",{writable:!1}),a}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),Object.defineProperty(a,"prototype",{writable:!1}),b&&h(a,b)}function g(a){return g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function b(a){return a.__proto__||Object.getPrototypeOf(a)},g(a)}function h(a,b){return h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function c(a,b){return a.__proto__=b,a},h(a,b)}function i(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}function j(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function k(a,b){if(b&&("object"==typeof b||"function"==typeof b))return b;if(void 0!==b)throw new TypeError("Derived constructors may only return object or undefined");return j(a)}function l(a){var b=i();return function c(){var d,e=g(a);if(b){var f=g(this).constructor;d=Reflect.construct(e,arguments,f)}else d=e.apply(this,arguments);return k(this,d)}}function m(a,b){if("object"!=typeof a||null===a)return a;var c=a[Symbol.toPrimitive];if(void 0!==c){var d=c.call(a,b||"default");if("object"!=typeof d)return d;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===b?String:Number)(a)}function n(a){var b=m(a,"string");return"symbol"==typeof b?b:b+""}function o(a){var b=J.get(a);return console.assert(null!=b,"'this' is expected an Event object, but got",a),b}function p(a){return null==a.passiveListener?void(!a.event.cancelable||(a.canceled=!0,"function"==typeof a.event.preventDefault&&a.event.preventDefault())):void("undefined"!=typeof console&&"function"==typeof console.error&&console.error("Unable to preventDefault inside passive event listener invocation.",a.passiveListener))}function q(a,b){J.set(this,{eventTarget:a,event:b,eventPhase:2,currentTarget:a,canceled:!1,stopped:!1,immediateStopped:!1,passiveListener:null,timeStamp:b.timeStamp||Date.now()}),Object.defineProperty(this,"isTrusted",{value:!1,enumerable:!0});for(var c,d=Object.keys(b),e=0;e<d.length;++e)c=d[e],c in this||Object.defineProperty(this,c,r(c))}function r(a){return{get:function b(){return o(this).event[a]},set:function c(b){o(this).event[a]=b},configurable:!0,enumerable:!0}}function s(a){return{value:function b(){var c=o(this).event;return c[a].apply(c,arguments)},configurable:!0,enumerable:!0}}function t(a,b){function c(b,c){a.call(this,b,c)}var d=Object.keys(b);if(0===d.length)return a;c.prototype=Object.create(a.prototype,{constructor:{value:c,configurable:!0,writable:!0}});for(var e,f=0;f<d.length;++f)if(e=d[f],!(e in a.prototype)){var g=Object.getOwnPropertyDescriptor(b,e),h="function"==typeof g.value;Object.defineProperty(c.prototype,e,h?s(e):r(e))}return c}function u(a){if(null==a||a===Object.prototype)return q;var b=K.get(a);return null==b&&(b=t(u(Object.getPrototypeOf(a)),a),K.set(a,b)),b}function v(a,b){var c=u(Object.getPrototypeOf(b));return new c(a,b)}function w(a){return o(a).immediateStopped}function x(a,b){o(a).eventPhase=b}function y(a,b){o(a).currentTarget=b}function z(a,b){o(a).passiveListener=b}function A(a){return null!==a&&"object"===b(a)}function B(a){var b=L.get(a);if(null==b)throw new TypeError("'this' is expected an EventTarget object, but got another value.");return b}function C(a){return{get:function b(){for(var c=B(this),d=c.get(a);null!=d;){if(3===d.listenerType)return d.listener;d=d.next}return null},set:function c(b){"function"==typeof b||A(b)||(b=null);for(var d=B(this),e=null,f=d.get(a);null!=f;)3===f.listenerType?null===e?null===f.next?d.delete(a):d.set(a,f.next):e.next=f.next:e=f,f=f.next;if(null!==b){var g={listener:b,listenerType:3,passive:!1,once:!1,next:null};null===e?d.set(a,g):e.next=g}},configurable:!0,enumerable:!0}}function D(a,b){Object.defineProperty(a,"on".concat(b),C(b))}function E(a){function b(){F.call(this)}b.prototype=Object.create(F.prototype,{constructor:{value:b,configurable:!0,writable:!0}});for(var c=0;c<a.length;++c)D(b.prototype,a[c]);return b}function F(){if(this instanceof F)return void L.set(this,new Map);if(1===arguments.length&&Array.isArray(arguments[0]))return E(arguments[0]);if(0<arguments.length){for(var a=Array(arguments.length),b=0;b<arguments.length;++b)a[b]=arguments[b];return E(a)}throw new TypeError("Cannot call a class as a function")}function G(){var a=Object.create(O.prototype);return F.call(a),P.set(a,!1),a}function H(a){!1!==P.get(a)||(P.set(a,!0),a.dispatchEvent({type:"abort"}))}function I(a){var c=R.get(a);if(null==c)throw new TypeError("Expected 'this' to be an 'AbortController' object, but got ".concat(null===a?"null":b(a)));return c}var J=new WeakMap,K=new WeakMap;q.prototype={get type(){return o(this).event.type},get target(){return o(this).eventTarget},get currentTarget(){return o(this).currentTarget},composedPath:function a(){var b=o(this).currentTarget;return null==b?[]:[b]},get NONE(){return 0},get CAPTURING_PHASE(){return 1},get AT_TARGET(){return 2},get BUBBLING_PHASE(){return 3},get eventPhase(){return o(this).eventPhase},stopPropagation:function a(){var b=o(this);b.stopped=!0,"function"==typeof b.event.stopPropagation&&b.event.stopPropagation()},stopImmediatePropagation:function a(){var b=o(this);b.stopped=!0,b.immediateStopped=!0,"function"==typeof b.event.stopImmediatePropagation&&b.event.stopImmediatePropagation()},get bubbles(){return!!o(this).event.bubbles},get cancelable(){return!!o(this).event.cancelable},preventDefault:function a(){p(o(this))},get defaultPrevented(){return o(this).canceled},get composed(){return!!o(this).event.composed},get timeStamp(){return o(this).timeStamp},get srcElement(){return o(this).eventTarget},get cancelBubble(){return o(this).stopped},set cancelBubble(a){if(a){var b=o(this);b.stopped=!0,"boolean"==typeof b.event.cancelBubble&&(b.event.cancelBubble=!0)}},get returnValue(){return!o(this).canceled},set returnValue(a){a||p(o(this))},initEvent:function a(){}},Object.defineProperty(q.prototype,"constructor",{value:q,configurable:!0,writable:!0}),"undefined"!=typeof window&&"undefined"!=typeof window.Event&&(Object.setPrototypeOf(q.prototype,window.Event.prototype),K.set(window.Event.prototype,q));var L=new WeakMap,M=1,N=2;F.prototype={addEventListener:function d(a,b,c){if(null!=b){if("function"!=typeof b&&!A(b))throw new TypeError("'listener' should be a function or an object.");var e=B(this),f=A(c),g=f?!!c.capture:!!c,h=g?M:N,i={listener:b,listenerType:h,passive:f&&!!c.passive,once:f&&!!c.once,next:null},j=e.get(a);if(void 0===j)return void e.set(a,i);for(var k=null;null!=j;){if(j.listener===b&&j.listenerType===h)return;k=j,j=j.next}k.next=i}},removeEventListener:function d(a,b,c){if(null!=b)for(var e=B(this),f=A(c)?!!c.capture:!!c,g=f?M:N,h=null,i=e.get(a);null!=i;){if(i.listener===b&&i.listenerType===g)return void(null===h?null===i.next?e.delete(a):e.set(a,i.next):h.next=i.next);h=i,i=i.next}},dispatchEvent:function b(a){if(null==a||"string"!=typeof a.type)throw new TypeError("\"event.type\" should be a string.");var c=B(this),d=a.type,e=c.get(d);if(null==e)return!0;for(var f=v(this,a),g=null;null!=e;){if(e.once?null===g?null===e.next?c.delete(d):c.set(d,e.next):g.next=e.next:g=e,z(f,e.passive?e.listener:null),"function"==typeof e.listener)try{e.listener.call(this,f)}catch(a){"undefined"!=typeof console&&"function"==typeof console.error&&console.error(a)}else e.listenerType!==3&&"function"==typeof e.listener.handleEvent&&e.listener.handleEvent(f);if(w(f))break;e=e.next}return z(f,null),x(f,0),y(f,null),!f.defaultPrevented}},Object.defineProperty(F.prototype,"constructor",{value:F,configurable:!0,writable:!0}),"undefined"!=typeof window&&"undefined"!=typeof window.EventTarget&&Object.setPrototypeOf(F.prototype,window.EventTarget.prototype);var O=function(a){function d(){var a;throw c(this,d),a=g.call(this),new TypeError("AbortSignal cannot be constructed directly")}f(d,a);var g=l(d);return e(d,[{key:"aborted",get:function a(){var c=P.get(this);if("boolean"!=typeof c)throw new TypeError("Expected 'this' to be an 'AbortSignal' object, but got ".concat(null===this?"null":b(this)));return c}}]),d}(F);D(O.prototype,"abort");var P=new WeakMap;Object.defineProperties(O.prototype,{aborted:{enumerable:!0}}),"function"==typeof Symbol&&"symbol"===b(Symbol.toStringTag)&&Object.defineProperty(O.prototype,Symbol.toStringTag,{configurable:!0,value:"AbortSignal"});var Q=function(){function a(){c(this,a),R.set(this,G())}return e(a,[{key:"signal",get:function a(){return I(this)}},{key:"abort",value:function a(){H(I(this))}}]),a}(),R=new WeakMap;if(Object.defineProperties(Q.prototype,{signal:{enumerable:!0},abort:{enumerable:!0}}),"function"==typeof Symbol&&"symbol"===b(Symbol.toStringTag)&&Object.defineProperty(Q.prototype,Symbol.toStringTag,{configurable:!0,value:"AbortController"}),a.AbortController=Q,a.AbortSignal=O,Object.defineProperty(a,"__esModule",{value:!0}),"undefined"==typeof module&&"undefined"==typeof define){var S=Function("return this")();"undefined"==typeof S.AbortController&&(S.AbortController=Q,S.AbortSignal=O)}});
//# sourceMappingURL=abort-controller.umd.js.map
